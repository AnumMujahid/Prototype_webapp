{% extends 'layout.html' %}

{% block content %}	
    
    <div class="text-center">
		<button id="buyer-button" class="btn" onclick="getall('buyer')">Buyers</button>
		<button id="plot-button"  class="btn" onclick="getall('plot')">Plots</button>
		<button id="deal-button"  class="btn" onclick="getall('deal')">Deals</button>
		<button id="CA-button"    class="btn" onclick="getall('CA')">Commission Agents</button>
		<button id="ET-button"    class="btn" onclick="getall('ET')">Expenditure Types</button>
	</div>

	<!-- Div to display Buyers --> 
	{% if active == "buyers" %}
	<div id="buyer-div" style="display: block;">
		{% else %}
		<div id="buyer-info" style="display: none;">
			{% endif %}
			{% for buyer in buyers %}
			<div class="row pl-5">

			  <legend>
			    <strong>Buyer ID {{buyer.id}}:</strong>
			  </legend>

			  <p>
			    Buyer Name: {{ buyer.name }}</br>
			    Buyer CNIC: {{ buyer.cnic }}</br>
			    {% if buyer.comments %}
			    Comments: {{ buyer.comments }}</br>
			    {% endif %}
			    {% if buyer.deals[0] %}
			    Buyer's Deals:
			    {% for deal in buyer.deals %}
			    {{ deal.id }}
			    {% endfor %}
			    <br>
			    {% endif %}
			  </p>
			</div>

			<div class="row pl-5 pb-4 border-bottom border-secondary">
			  {% if not current_user.rank %}

			  <button class="btn btn-outline-danger btn-sm"><a class="deleteLink"
			      href="{{ url_for('deletebuyer', buyer_id=buyer.id) }}">Delete Buyer</button>

			  {% endif %}

			  <button class="btn btn-outline-secondary btn-sm  ml-2"><a href="{{ url_for('editbuyer', buyer_id=buyer.id) }}">Edit
			      Buyer Info</a></button>

			</div>
			<br><br>

			{% endfor %}
		</div>
	</div>

	<!-- Div to display Plots --> 
	<div id="plot-div" style="display: none">

	<div class="row pl-4 my-3">
		<div class="col-2">
		  {{ filterPlotForm.status.label }}
		</div>
		<div class="col-6">
		  {{ filterPlotForm.status(class='form-control') }}
		</div>
		<div class="col-4">
			{{ filterPlotForm.filter(class='btn btn-outline-primary', id='filterPlot-btn') }}
		</div>
	</div>

		<div id="plot-info">
		</div>
	</div>


	<!-- Div to display Deals --> 
	<div id="deal-div">
		<div id="deal-info">
		</div>
	</div>


	<!-- CAs -->
	{% if active == "CAs" %}
	<div id="CAs-div" style="display: block;">
		{% else %}
		<div id="CAs-div" style="display: none;">
			{% endif %}
			{% for buyer in buyers %}
			<div class="row pl-5">
				<legend>
					<strong>
					<a href="{{ url_for('buyerinfo', buyer_id=buyer.id) }}">Buyer ID {{buyer.id}}:</a>
					</strong>
				</legend>

				<p>
					Buyer Name:    {{ buyer.name }}</br>
					Buyer CNIC:    {{ buyer.cnic }}</br>
					Buyer Phone:   {{ buyer.phone }}</br>
					Buyer Email:   {{ buyer.email }}</br>
					Buyer Address: {{ buyer.address }}</br>

					{% if buyer.comments %}
					Comments: {{ buyer.comments }}</br>
					{% endif %}
					Commission Rate: {{ buyer.commission_rate }}
					<br>
				</p>
			</div>

	<div class="row pl-5 pb-4 border-bottom border-secondary">
		{% if not current_user.rank %}

		<button class="btn btn-outline-danger btn-sm"><a class="deleteLink"
				href="{{ url_for('deletebuyer', buyer_id=buyer.id) }}">Delete buyer</a></button>

		{% endif %}

		<button class="btn btn-outline-secondary btn-sm  ml-2"><a
				href="{{ url_for('editbuyer', buyer_id=buyer.id) }}">Edit Agent Info</a></button>

	</div>
	<br><br>

	{% endfor %}
	</div>

			<!-- ETs -->
			{% if active == "ETs" %}
			<div id="ETs-div" style="display: block;">
				{% else %}
				<div id="ETs-div" style="display: none;">
					{% endif %}
					{% for ET in ETs %}
					{% endfor %}
				</div>
			</div>

{% endblock %}

{% block script %}
	<script src="{{ url_for('static', filename='js/displaypage.js') }}"></script>
	<script type="text/javascript">getall("{{ active }}")</script>
{% endblock %}
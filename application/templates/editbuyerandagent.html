{% extends 'layout.html' %}
 
{% block content %}
<!-- new -->
<div class="container my-5">
  <div class="row">
    <div class="col-md-3"></div>
    <div class="col-12 col-md-6">
        <form method="POST" action="{{ url_for('editbuyer', buyer_id=entity.id) }}" class="form-style">
	         <fieldset class="form-group">
              {{ form.csrf_token }}
              <legend class="text-orange-1 text-center"id="title">Edit Buyer</legend>
              <p id="sub-title" class="text-dark-3 text-center">Edit buyer information</p>
              <br>
		          <div class="form-group">
                	{{ form.name.label }}
                	{% if form.name.errors %}
                	{{ form.name(class='form-control is-invalid') }}
          	      <div class="invalid-feedback">
                    {% for error in form.name.errors %}
                      <span>{{ error }}</span>
                    {% endfor %}
          	      </div>
          	      {% else %}
                  {{ form.name(class='form-control', value=entity.name) }}
                  {% endif %}
      	      </div>

              <div class="form-group">
                  {{ form.phone.label }}              
                  {% if form.phone.errors %}
                  {{ form.phone(class='form-control is-invalid') }}
                  <div class="invalid-feedback">
                    {% for error in form.phone.errors %}
                      <span>{{ error }}</span>
                    {% endfor %}
                  </div>
                    {% else %}
                      {{ form.phone(class='form-control', value=entity.phone) }}
                    {% endif %}
         
                  </div>

      <div class="form-group">
          {{ form.email.label }}
      
          {% if form.email.errors %}
            {{ form.email(class='form-control is-invalid') }}
              <div class="invalid-feedback">
                {% for error in form.email.errors %}
                  <span>{{ error }}</span>
                {% endfor %}
              </div>
            {% else %}
              {{ form.email(class='form-control', value=entity.email) }}
            {% endif %}
 
          </div>

      {% if editbuyer %}
      <div class="form-group">
          {{ form.address.label }}
          {% if form.address.errors %}
            {{ form.address(class='form-control is-invalid') }}
              <div class="invalid-feedback">
                {% for error in form.address.errors %}
                  <span>{{ error }}</span>
                {% endfor %}
              </div>
            {% else %}
              {{ form.address(class='form-control', value=entity.address) }}
            {% endif %}
 
          </div>
      {% endif %}

      <div class="form-group">
          {{ form.cnic.label }}
      
          {% if form.cnic.errors %}
            {{ form.cnic(class='form-control is-invalid') }}
              <div class="invalid-feedback">
                {% for error in form.cnic.errors %}
                  <span>{{ error }}</span>
                {% endfor %}
              </div>
            {% else %}
              {{ form.cnic(placeholder="Enter numbers only", class='form-control', value=entity.cnic) }}
            {% endif %}
 
          </div>

		  <div class="form-group">
        	{{ form.comments.label }}
     	
        	{% if form.comments.errors %}
        	  {{ form.comments(class='form-control is-invalid') }}
          	  <div class="invalid-feedback">
                {% for error in form.comments.errors %}
                  <span>{{ error }}</span>
                {% endfor %}
          	  </div>
          	{% else %}
                {{ form.comments(placeholder="Leave empty if no comments", class='form-control') }}
            {% endif %}
 
      	  </div>

	      <button type="submit" class="btn btn-outline-dark">Submit</button>

	  </fieldset>
	</form>
  </div>

  <script type="text/javascript">

      var action = "";
      var legend = "";

      {% if editbuyer %}
        action = "{{ url_for('editbuyer',  buyer_id=entity.id) }}";
        legend = "Edit Buyer";
        text   = "Edit Buyer Information";
      {% elif editagent %}
        action = "{{ url_for('editagent', agent_id=entity.id) }}";
        legend = "Edit Agent";
        text   = "Edit Agent Information";
      {% else %}
        action = "{{ url_for('profile')}}";
      {% endif %}

      document.getElementsByTagName("form")[0].setAttribute("action", action);    
      document.getElementById("title").innerHTML = legend;
      document.getElementById("sub-title").innerHTML = text;
      
  </script>
{% endblock %}
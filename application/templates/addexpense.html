{% extends 'layout.html' %}

{% block content %}

	<div class="container my-5">
		<div class="row">
			<div class="col-md-3"></div>
			<div class="col-12 col-md-6">
				<form method="POST" 
					  action="{{ url_for('addexpense', id=form.ET_id.data) }}" 
					  class="form-style"
				>
					<fieldset class="form-group">
						{{ form.csrf_token }}						

						
						<legend class="text-orange-1 text-center">
							Add Expense
						</legend>
						<p class="text-dark-3 text-center">
							Add Expense for an Expenditure Type
						</p>

						<div id="ET_id-div">
							{{ form.ET_id.label }}
							{{ form.ET_id(class='form-control') }}
							<a class="span-link" id="new">
								Create New Expenditure Type
							</a>
							<br>
						</div>						

						<div id="ET_name-div" class="form-group" style="display: none">
							
							{{ form.ET_name.label }}
							{% if form.ET_name.errors %}
							{{ form.ET_name(class='form-control is-invalid') }}
							<a class="span-link" id="back">
								Select and Existing Expenditure Type
							</a>
							<div class="invalid-feedback">
								{% for error in form.ET_name.errors %}
								<span>{{ error }}</span>
								{% endfor %}
							</div>
							{% else %}
							{{ form.ET_name(class='form-control') }}
							<a class="span-link" id="back">
								Select and Existing Expenditure Type
							</a>
							{% endif %}
						</div>

						<br>
						<div class="form-group">
							{{ form.amount.label }}
							{% if form.amount.errors %}
							{{ form.amount(class='form-control is-invalid') }}
							<div class="invalid-feedback">
								{% for error in form.amount.errors %}
								<span>{{ error }}</span>
								{% endfor %}
							</div>
							{% else %}
							{{ form.amount(class='form-control') }}
							{% endif %}
						</div>
						
						<br>
						<div class="form-group">
							{{ form.comments.label }}
							{% if form.comments.errors %}
							{{ form.comments(class='form-control is-invalid') }}
							<div class="invalid-feedback">
								{% for error in form.comments.errors %}
								<span>{{ error }}</span>
								{% endfor %}
							</div>
							{% else %}
							{{ form.comments(class='form-control') }}
							{% endif %}
						</div>
						
						<br>
						<div class="form-group btn-center">
							{{ form.add(class='btn btn-outline-dark') }}
						</div>
					</fieldset>
				</form>
			</div>
			<div class="col-md-3"></div>
		</div>
	</div>

{% endblock %}

{% block script %}
<script type="text/javascript">

	{% if error %}
	console.log('popop');
	$('#ET_id-div').hide();
	$('#ET_name-div').show();
	$('#ET_name').prop('required', true); 
	{% endif %}

	$('#new').on('click', function(){
		$('#ET_id-div').hide();
		$('#ET_name-div').show();
		$('#ET_id').val('None'); 
		$('#ET_name').prop('required', true); 
	});
	$('#back').on('click', function(){
		$('#ET_id-div').show();
		$('#ET_name-div').hide();
		$('#ET_name').val('');  
		$('#ET_name').prop('required', false);  
	});
</script>
{% endblock %}
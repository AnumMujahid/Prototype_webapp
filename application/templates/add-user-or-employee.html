{% extends 'layout.html' %}

{% block content %}
<!-- new -->
<div class="container my-5">
	<div class="row">
		<div class="col-md-3"></div>
		<div class="col-12 col-md-6">
			<form method="POST" action="{{ url_for('add_user_or_employee') }}" class="form-style" enctype='multipart/form-data'>
				<fieldset class="form-group">
					{{ form.csrf_token }}
					<legend class="text-orange-1 text-center">
						Add User or Employee
					</legend>
					<p class="text-dark-3 text-center">
						Add a User or an Employee to the System
					</p>

					<br>
					<div class="form-group">
						{{ form.type.label }}
						{% if form.type.errors %}
						{{ form.type(class='form-control is-invalid') }}
						<div class="invalid-feedback">
							{% for error in form.type.errors %}
							<span>{{ error }}</span>
							{% endfor %}
						</div>
						{% else %}
						{{ form.type(class='form-control') }}
						{% endif %}
					</div>

					<div class="form-group">
						{{ form.name.label }}

						{% if form.name.errors %}
						{{ form.name(class='form-control is-invalid') }}
						<div class="invalid-feedback">
							{% for error in form.name.errors %}
							<span>{{ error }}</span>
							{% endfor %}
						</div>
						{% else %}
						{{ form.name(class='form-control') }}
						{% endif %}
					</div>

					<div class="form-group" id="email-div">
						{{ form.email.label }}

						{% if form.email.errors %}
						{{ form.email(class='form-control is-invalid', type='email') }}
						<div class="invalid-feedback">
							{% for error in form.email.errors %}
							<span>{{ error }}</span>
							{% endfor %}
						</div>
						{% else %}
						{{ form.email(class='form-control', type='email') }}
						{% endif %}

					</div>

					<div class="form-group" id="password-div">
						{{ form.password.label }}

						{% if form.password.errors %}
						{{ form.password(class='form-control is-invalid') }}
						<div class="invalid-feedback">
							{% for error in form.password.errors %}
							<span>{{ error }}</span>
							{% endfor %}
						</div>
						{% else %}
						{{ form.password(placeholder='Leave empty for default password (12345)', class='form-control')
						}}
						{% endif %}
					</div>

					<div class="form-group">
						{{ form.cnic.label }}

						{% if form.cnic.errors %}
						{{ form.cnic(class='form-control is-invalid') }}
						<div class="invalid-feedback">
							{% for error in form.cnic.errors %}
							<span>{{ error }}</span>
							{% endfor %}
						</div>
						{% else %}
						{{ form.cnic(class='form-control') }}
						{% endif %}
					</div>

					<div class="form-group">
						{{ form.phone.label }}

						{% if form.phone.errors %}
						{{ form.phone(class='form-control is-invalid') }}
						<div class="invalid-feedback">
							{% for error in form.phone.errors %}
							<span>{{ error }}</span>
							{% endfor %}
						</div>
						{% else %}
						{{ form.phone(class='form-control') }}
						{% endif %}
					</div>

					<div class="form-group">
						{{ form.cnic_front.label }}

						{% if form.cnic_front.errors %}
						{{ form.cnic_front(class='form-control is-invalid') }}
						<div class="invalid-feedback">
							{% for error in form.cnic_front.errors %}
							<span>{{ error }}</span>
							{% endfor %}
						</div>
						{% else %}
						{{ form.cnic_front(class='form-control') }}
						{% endif %}
					</div>

					<div class="form-group">
						{{ form.cnic_back.label }}

						{% if form.cnic_back.errors %}
						{{ form.cnic_back(class='form-control is-invalid') }}
						<div class="invalid-feedback">
							{% for error in form.cnic_back.errors %}
							<span>{{ error }}</span>
							{% endfor %}
						</div>
						{% else %}
						{{ form.cnic_back(class='form-control') }}
						{% endif %}
					</div>

					<div class="form-group">
						{{ form.comments.label }}

						{% if form.comments.errors %}
						{{ form.comments(class='form-control is-invalid') }}
						<div class="invalid-feedback">
							{% for error in form.comments.errors %}
							<span>{{ error }}</span>
							{% endfor %}
						</div>
						{% else %}
						{{ form.comments(class='form-control') }}
						{% endif %}
					</div>

					<br>
					<div class="form-group btn-center">
						{{ form.create(class='btn btn-outline-dark') }}
					</div>
				</fieldset>
			</form>
		</div>
		<div class="col-md-3"></div>
	</div>
</div>
<!-- new -->

{% endblock %}

{% block script %}
<script type="text/javascript">
	$(function() {
		
    	if ($('#type').val() == 1){
			$('#email').prop('required', true);
			$('#email-div').show();
			$('#password-div').show();
		}
		else{
			$('#email').prop('required', false);
			$('#email-div').hide();
			$('#password-div').hide();
		}
	});
	$('#type').on('change', function(){
		
		$('#email').val   ('');
		$('#password').val('');
		$('#username').val('');
		if(this.value == 1){
			$('#email').prop       ('required', true);
			$('#email-div').show   ();
			$('#password-div').show();
		}
		else{
			$('#email').prop('required', false);
			$('#email-div').hide();
			$('#password-div').hide();
		}
	});	
</script>
{% endblock %}